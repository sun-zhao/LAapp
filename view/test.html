<!DOCTYPE html>
<html>
	<head>
		<meta charset="" />
		<title>111</title>
		<script type="text/javascript" src="js/jquery.js"></script>
	</head>
	<style type="text/css">
		*{margin:0;padding:0}
		html,body{height:100%}
		.spirit{position:absolute;width:50px;height:50px;background-color:red;}
		#canvas{position:relative;width:100%;height:100%;background-color:#ccc}
	</style>
	<script type="text/javascript">
		$(document).ready(function(){
			var canvas = document.getElementById("canvas"),
			    spirit,
			    startX,
			    startY;
			function touchStart(event) {
			    //阻止网页默认动作（即网页滚动）
			    event.preventDefault();
			    if (spirit || !event.touches.length) return;
			    var touch = event.touches[0];
			    startX = touch.pageX;
			    startY = touch.pageY;
			    spirit = document.createElement("div");
			    canvas.appendChild(spirit);
			    spirit.className = "spirit";
			    spirit.style.left = startX + "px";
			    spirit.style.top = startY + "px";
			}
			canvas.addEventListener("touchstart", touchStart, false);
			function touchMove(event) {
			    event.preventDefault();
			    if (!spirit || !event.touches.length) return;
			    var touch = event.touches[0],
			        x = touch.pageX - startX,
			        y = touch.pageY - startY;
			    //这里是为了手指一定是横向滚动的,原理是计算X位置的偏移要比Y的偏移大
			    if (Math.abs(x) > Math.abs(y)) {
			        spirit.style.left = touch.pageX + "px";
			        spirit.style.top = touch.pageY + "px";
			    }
			}
			canvas.addEventListener("touchmove", touchMove, false);
			function touchEnd(event) {
			    if (!spirit) return;
			    canvas.removeChild(spirit);
			    spirit = null;
			}
			canvas.addEventListener("touchend", touchEnd, false);
		}
	</script>
	<body>
		<div id="canvas"></div>
	</body>
</html>
